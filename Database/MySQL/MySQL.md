```
본 문서는 한빛미디어, 우재남님의
'혼자 공부하는 SQL'
을 참고하여 정리한 문서입니다.
```

- [Chapter 1. 데이터베이스와 SQL](#chapter-1-데이터베이스와-sql)
  - [1-1. 데이터베이스 알아보기](#1-1-데이터베이스-알아보기)
    - [1-1-1. 데이터베이스와 DBMS](#1-1-1-데이터베이스와-dbms)
      - [DMBS의 정의](#dmbs의-정의)
      - [DBMS의 종류](#dbms의-종류)
    - [1-1-2. DBMS의 발전과정](#1-1-2-dbms의-발전과정)
      - [종이에 펜으로 기록](#종이에-펜으로-기록)
      - [컴퓨터에 파일로 저장](#컴퓨터에-파일로-저장)
      - [DBMS의 대두와 보급](#dbms의-대두와-보급)
    - [1-1-3. DBMS의 종류](#1-1-3-dbms의-종류)
      - [계층형 DBMS](#계층형-dbms)
      - [망형 DBMS](#망형-dbms)
      - [관계형 DBMS](#관계형-dbms)
    - [1-1-4. DBMS에서 사용되는 언어: SQL](#1-1-4-dbms에서-사용되는-언어-sql)
- [Chapter 2. 실전용 SQL 미리 맛보기](#chapter-2-실전용-sql-미리-맛보기)
  - [2-1. 건물을 짓기 위한 설계도: 데이터베이스 모델링](#2-1-건물을-짓기-위한-설계도-데이터베이스-모델링)
    - [2-1-1. 프로젝트 진행 단계](#2-1-1-프로젝트-진행-단계)
    - [2-1-2. 데이터베이스 모델링](#2-1-2-데이터베이스-모델링)
    - [2-1-3. 전체 데이터베이스 구성도](#2-1-3-전체-데이터베이스-구성도)
  - [2-2. 데이터베이스 시작부터 끝까지](#2-2-데이터베이스-시작부터-끝까지)
    - [2-2-1. DBMS 설치하기](#2-2-1-dbms-설치하기)
    - [2-2-2. 데이터베이스 만들기](#2-2-2-데이터베이스-만들기)
    - [2-2-3. 테이블 만들기](#2-2-3-테이블-만들기)
      - [테이블 설계하기](#테이블-설계하기)
      - [테이블 생성하기](#테이블-생성하기)
    - [2-2-4. 데이터 입력하기](#2-2-4-데이터-입력하기)
    - [2-2-5. 데이터 활용하기](#2-2-5-데이터-활용하기)

# Chapter 1. 데이터베이스와 SQL

## 1-1. 데이터베이스 알아보기

* 데이터베이스에는 우리 일상생활 대부분의 정보가 저장되고 관리됩니다.

* **데이터베이스(Database, DB)** 를 한 마디로 정의한다면 '데이터의 집합'이라고 할 수 있습니다.

### 1-1-1. 데이터베이스와 DBMS

#### DMBS의 정의

* 데이터베이스를 관리하고 운영하는 소프트웨어를 **DBMS(Database Management System)** 라고 합니다. 다양한 데이터가 저장되어 있는 데이터베이스는 여러 명의 사용자나 응용 프로그램과 공유하고 동시에 접근이 가능해야 합니다.

* 엑셀과 같은 프로그램은 '데이터의 집합'을 관리하고 운영한다는 차원에서는 DBMS라고 볼 수 있지만, *대용량의 데이터를 관리하거나 여러 사용자와 공유하는 개념과는 거리가 있어 DBMS라고 부르지 않습니다.*

#### DBMS의 종류

* DBMS는 대표적으로 MySQL, 오라클(Oracle), SQL 서버(Server), MariaDB 등이 있습니다.

### 1-1-2. DBMS의 발전과정

#### 종이에 펜으로 기록

#### 컴퓨터에 파일로 저장

* 컴퓨터가 등장한 이후 프로그램을 통해 더욱 효율적으로 정보를 관리하게 되었습니다. 기록된 내용은 파일(file)이라는 형태로 저장해 필요할 때마다 열어서 사용할 수 있습니다.

#### DBMS의 대두와 보급

* 앞서 파일은 여러 명의 사람들이 이용하기에 불용이하였기에 이를 보완하며 대량의 데이터를 효율적으로 관리하고 운영하기 위해서 등장한 것이 DBMS입니다.

* DBMS는 데이터의 집합인 데이터베이스를 잘 관리하고 운영하기 위한 시스템 또는 소프트웨어를 말합니다. DBMS에 데이터를 구축, 관리하고 활용하기 위해서 사용되는 언어가 **SQL(Structured Query Language)** 입니다.

* 즉, SQL문을 잘 이해하고 사용해야만 DBMS를 원활하게 활용할 수 있습니다. 

### 1-1-3. DBMS의 종류

#### 계층형 DBMS

* 계층형 DBMS(Hierarchical DBMS)는 처음으로 등장한 DBMS 개념으로 각 계층은 트리(tree) 형태를 갖습니다.
* 계층형 DBMS의 문제는 처음 구성을 완료한 후에 이를 변경하기가 상당히 까다롭다는 것입니다. 회사 내 수직적인 구조처럼 여러 단계를 거쳐야 합니다. 지금은 사용하지 않는 형태입니다.

#### 망형 DBMS

* 망형 DBMS(Network DBMS)는 계층형 DBMS의 문제점을 개선하기 위해 등장했으며, 하위에 있는 구성원끼리도 연결된 유연한 구조입니다.
* 망형 DBMS를 잘 활용하려면 프로그래머가 모든 구조를 이해해야만 프로그램 작성이 가능하다는 단점이 존재합니다. 역시 지금은 거의 사용하지 않는 형태입니다.

#### 관계형 DBMS

* 관계형 DBMS(Relational DBMS)는 줄여서 **RDBMS**라고 부릅니다. 우리가 사용할 MySQL뿐만 아니라 대부분의 DBMS가 RDBMS 형태로 사용됩니다. RDBMS의 데이터베이스는 테이블(table)이라는 최소 단위로 구성되며, 이 테이블은 하나 이상의 열(column)과 행(row)으로 이루어져 있습니다.
* 테이블은 열과 행으로 이루어진 2차원 구조를 갖습니다. 세로는 열, 가로는 행이라고 합니다.

>![테이블-출처: 위키피디아](https://upload.wikimedia.org/wikipedia/commons/thumb/7/7c/Relational_database_terms.svg/525px-Relational_database_terms.svg.png)  
> 출처: 위키피디아

### 1-1-4. DBMS에서 사용되는 언어: SQL

* SQL은 관계형 데이터베이스에서 사용되는 언어로 관계형 DBMS를 배우려면 필수로 익혀야 합니다.

* SQL은 국제표준화기구에서 SQL에 대한 표준을 정해서 발표하고 있습니다. 이를 **표준 SQL**이라고 합니다. DBMS를 만드는 회사에서는 되도록 표준 SQL을 준수하되, 각 제품의 특성을 반영한 SQL을 사용합니다. 

# Chapter 2. 실전용 SQL 미리 맛보기

## 2-1. 건물을 짓기 위한 설계도: 데이터베이스 모델링

* **데이터베이스 모델링(database modeling)** 은 테이블의 구조를 미리 설계하는 개념으로 프로젝트에서 데이터베이스 모델링이 잘 되어야 제대로 된 데이터베이스를 구축할 수 있습니다.

* 프로젝트를 진행하기 위해서는 대표적으로 **폭포수 모델(waterfall model)** 을 사용하여, 데이터베이스 모델링은 폭포수 모델의 업무 분석과 시스템 설계 단계에 해당합니다. 이 단계를 거치면 가장 중요한 데이터베이스 개체인 **테이블 구조**가 결정되는 것입니다.

### 2-1-1. 프로젝트 진행 단계

* 프로젝트란 '현실 세계에서 일어나는 업무를 컴퓨터 시스템으로 옮겨놓는 과정'입니다. 더 쉽게는 '대규모 소프트웨어를 작성하기 위한 전체 과정'이라고 이야기할 수 있습니다.

* 소프트웨어 개발 절차 중 하나로 **폭포수 모델(waterfall model)** 이라는 것이 있습니다.

> 슈퍼마켓의 물건을 판매하기 위한 프로젝트 진행
> 1. 프로젝트 계획: 슈퍼마켓의 물건들을 온라인으로 판매하기 위한 계획 단계입니다.  
>   
> 2. 업무 분석: 슈퍼마켓에서 업무가 어떻게 돌아가는지 파악하는 것입니다. 예로 물건은 어디서 들어오는지, 물건을 어떻게 계산하는지, 재고는 어떻게 관리하는지 등의 업무에 대해서 정리하는 단계입니다.
> 
> 3. 시스템 설계: 앞에서 정리한 업무 분석을 컴퓨터에 적용시키기 위해서 알맞은 형태로 다듬는 과정입니다.
> 
> 4. 프로그램 구현: 앞에서 완성한 시스템 설계의 결과를 실제 프로그래밍 언어로 코딩하는 단계입니다. 우리가 계획한 내용을 온라인으로 제공하기 위해서는 JavaScript, PHP, JSP 등의 프로그래밍 언어를 사용해야 합니다.
> 
> 5. 테스트: 코딩된 프로그램에 오류가 없는지 확인하는 과정입니다.
> 
> 6. 유지보수: 실제 온라인 쇼핑몰을 운영하면서 문제점을 보완하고 기능을 추가하는 과정입니다.

* 우리가 공부하는 데이터베이스 모델링은 폭포수 모델에서 업무 분석과 시스템 설계 단계에 해당합니다. 8장에서 프로그램 구현과 데이터베이스 연결도 실제로 구현해보겠습니다.

### 2-1-2. 데이터베이스 모델링

* 데이터베이스 모델링이란 우리가 살고 있는 세상에서 사용되는 사물이나 작업을 DBMS의 데이터베이스 개체로 옮기기 위한 과정이라고 할 수 있습니다.

* 우리가 구현할 인터넷 쇼핑몰에서는 고객 또는 직원 등의 사람이 필요합니다. 사람을 나타낼 수 있는 특징들을 추출해서 데이터베이스로 만들어야 합니다. 슈퍼마켓(현실 세계)의 고객, 물건, 직원 등을 데이터베이스에 각각의 **테이블**이라는 개체로 변환합니다.

* 예: 신분증에 이름, 주민등록번호, 주소 등의 정보가 있는 것

### 2-1-3. 전체 데이터베이스 구성도

![데이터베이스 구성도](img%201-1.jpg)  
(직접 제작)  

* 데이터: 하나하나의 단편적인 정보를 말합니다. 테이블에 들어가는 각각의 정보를 의미합니다.

* 테이블: 데이터를 입력하기 위해 표 형태로 표현한 것을 말합니다.

* 데이터베이스: 테이블이 저장되는 저장소를 말합니다. 각 데이터베이스는 이름이 서로 달라야 합니다.

* DBMS: 데이터베이스 관리 시스템 또는 소프트웨어를 말합니다.

* 열: 테이블의 세로를 말합니다.

* 열 이름: 각 열을 구분하기 위한 이름입니다. 열 이름은 각 테이블 내에서는 서로 달라야 합니다.

* 데이터 형식: 열에 저장될 데이터의 형식을 말합니다. 데이터 형식은 테이블을 생성할 때 열 이름과 함께 지정해줍니다.

* 행: 실질적인 진짜 데이터를 말합니다. 각각 속한 데이터를 행 데이터라고 부릅니다. 즉, 행의 개수가 데이터의 개수입니다.

* 기본 키(Primary Key, PK): 기본 키 열은 각 행을 구분하는 유일한 열을 말합니다. 가장 중요한 혹은 기초적인 열이며, 기본키는 중복되어서는 안 되며, 비어 있어서도 안됩니다.

* SQL: DBMS에서 작업을 하고 싶다면 DBMS가 알아듣는 언어(말)로 해야 합니다. 그것이 SQL(구조화된 질의 언어)입니다. 즉, SQL은 사람과 DBMS가 소통하기 위한 언어입니다.

## 2-2. 데이터베이스 시작부터 끝까지

* 데이터베이스는 데이터를 저장하는 공간입니다. MySQL을 설치한 후에는 가장 먼저 데이터베이스를 준비해야 합니다. 그리고 데이터베이스 안에 테이블을 생성해야 합니다.

* 테이블은 2차원의 표 형태로 이루어져 있으며, 각 열에 해당하는 데이터를 한 행씩 입력할 수 있습니다. 필요하다면 행에 입력된 데이터를 수정하거나 삭제할 수도 있습니다. 마지막으로 입력이 완료된 데이터를 조회해서 활용할 수 있습니다.

### 2-2-1. DBMS 설치하기

### 2-2-2. 데이터베이스 만들기

1. [SCHEMAS] 패널의 빈 부분에서 마우스 오른쪽 버튼을 클릭한 후 [Create Schema]를 선택합니다.

2. 새로운 쿼리창에서 [Name]을 입력 후 [Apply]버튼을 클릭하면 SQL문이 자동으로 생성됩니다.

### 2-2-3. 테이블 만들기

#### 테이블 설계하기

* 테이블을 설계하기 위해서 테이블의 열 이름과 데이터 형식을 지정해야 합니다.

* 문자는 CHAR(Character)라는 예약어를 사용해야 합니다,

* 널(Null)은 빈 것을 의미하며 널 허용 안 함(Not Null, NN)은 반드시 입력해야 한다는 의미입니다.

* INT는 Integer의 약자로 정수를 의미하며 DATE는 연, 월, 일을 입력합니다.

#### 테이블 생성하기

1. 데이터베이스를 클릭해 Tables를 마우스 우클릭한 후 Create Table을 선택합니다.

2. 테이블 이름에 'member'(예시) 입력하고 Column Name의 첫 번째 항목을 더블 클릭합니다.

3. 열 이름은 'member_id'로 입력하고 데이터 형식은 문자 8글자이므로 'CHAR(8)'이라고 입력합니다. 그리고 설계할 때 아이디(member_id)열을 기본 키로 설정하기로 했으므로 PK와 NN을 체크합니다.

4. 이어서 나머지 테이블을 설계한 후 apply 버튼을 클릭합니다.

### 2-2-4. 데이터 입력하기

1. MySQL Workbench 창의 SCHEMAS 패널에서 member 테이블을 선택하고 마우스 오른쪽 버튼을 클릭한 후 [Select Rows - Limits 1000]을 선택합니다.

2. Result Grid 창에서 NULL 부분을 클릭해서 데이터를 입력한 후 Apply 버튼을 클릭하면 입력한 내용이 SQL로 생성됩니다.

**기본 키로 설정한 열이 기준이 되어 오름차순으로 자동 정렬됩니다.**

3. 값을 수정할 때는 UPDATE 문이 생성되며, 데이터를 삭제할 때는 DELETE문이 생성됩니다.

### 2-2-5. 데이터 활용하기

* SQL에서는 데이터베이스를 활용하기 위해 주로 SELECT 문을 사용합니다.

1. 쿼리 창이 열려 있지 않은 상태에서 새 SQL을 입력하기 위해 툴 바의 Create a new SQL tab for executing queries 아이콘을 클릭합니다. 실행된 결과를 확인하기 위해 Output 아이콘을 클릭하여 Output 패널도 활성화합니다.

2. 작업할 데이터베이스를 선택하기 위해 SCHEMAS 패널의 'shop_db'를 더블 클릭합니다.

3. 먼저 회원 테이블의 모든 행을 조회하기 위해 다음 SQL을 입력합니다. SELECT의 기본 형식은 SELECT 열_이름 FROM 테이블_이름 [WHERE 조건]이고, *는 모든 열을 의미합니다. 툴바에서 Execute the selected portion of the script or everything 아이콘을 클릭하면 Result Grid 창에는 결과가, Output 패널에는 현재 결과의 건수와 조회하는데 소요된 시간(초)이 표시됩니다.

**SQL의 제일 뒤에는 세미콜론(;)이 꼭 있어야 합니다.**

4. 회원 테이블 중 이름과 주소만 출력해보겠습니다.

> 
>  ```SQL
>  SELECT member_name, member_addr FROM member;
>  ```
> 이렇게 여러 개의 열 이름을 콤마(,)로 분리하면 필요한 열만 추출됩니다.

5. 아이유 회원에 대한 정보만 추출해보겠습니다. WHERE 다음에 특정 조건을 입력하여 회원 이름(member_name)이 '아이유'인 회원만 출력되도록 한 것입니다.

> 
> ```SQL
> SELECT * FROM member WHERE member_name = '아이유';
> ```